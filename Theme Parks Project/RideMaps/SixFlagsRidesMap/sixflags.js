var map = L.map('map').setView([34.425331,-118.597219], 17);

//var map=L.map('map').fitBounds([[28.377,-81.553548],[28.3715485,-81.5816633]]);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

var rides =[{'Rank': 1,
'Roller Coaster Rides': 'X2',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.421629100000004,
'lng': -118.593427,
'rating': 4.7},
{'Rank': 2,
'Roller Coaster Rides': 'Tatsu',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4214956,
'lng': -118.59741580000001,
'rating': 4.8},
{'Rank': 3,
'Roller Coaster Rides': 'Goliath',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.426375799999995,
'lng': -118.5971493,
'rating': 4.6},
{'Rank': 4,
'Roller Coaster Rides': 'Twisted Colossus',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4274076,
'lng': -118.5982191,
'rating': 4.8},
{'Rank': 5,
'Roller Coaster Rides': 'Full Throttle',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.423862400000004,
'lng': -118.5965357,
'rating': 4.8},
{'Rank': 6,
'Roller Coaster Rides': "The Riddler's Revenge",
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.42418380000001,
'lng': -118.5998452,
'rating': 4.4},
{'Rank': 7,
'Roller Coaster Rides': 'Scream',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4280287,
'lng': -118.5982054,
'rating': 4.3},
{'Rank': 8,
'Roller Coaster Rides': 'Superman: Escape From Krypton',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4240381,
'lng': -118.5980801,
'rating': 4.4},
{'Rank': 9,
'Roller Coaster Rides': 'Batman: The Ride',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4260464,
'lng': -118.6000548,
'rating': 4.2},
{'Rank': 10,
'Roller Coaster Rides': 'Green Lantern: First Flight',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.425627399999996,
'lng': -118.5997949,
'rating': 2.7},
{'Rank': 11,
'Roller Coaster Rides': 'Viper',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4209352,
'lng': -118.59556840000002,
'rating': 4.0},
{'Rank': 12,
'Roller Coaster Rides': 'Lex Luthor: Drop of Doom',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4264164,
'lng': -118.5984501,
'rating': 4.8},
{'Rank': 13,
'Roller Coaster Rides': 'Apocalypse',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4214643,
'lng': -118.599652,
'rating': 4.4},
{'Rank': 14,
'Roller Coaster Rides': 'Colossus',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4274076,
'lng': -118.5982191,
'rating': 4.8},
{'Rank': 15,
'Roller Coaster Rides': 'Revolution',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4342109,
'lng': -118.5799705,
'rating': 4.9},
{'Rank': 16,
'Roller Coaster Rides': 'Ninja',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4219616,
'lng': -118.59821310000001,
'rating': 4.0},
{'Rank': 17,
'Roller Coaster Rides': 'Dejavu',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.405698,
'lng': -118.584103,
'rating': 0.0},
{'Rank': 18,
'Roller Coaster Rides': 'The New Revolution',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4219237,
'lng': -118.59637109999998,
'rating': 3.7},
{'Rank': 19,
'Roller Coaster Rides': 'CraZanity',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.425000700000005,
'lng': -118.5986248,
'rating': 5.0},
{'Rank': 20,
'Roller Coaster Rides': 'Gold Rusher',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.423460799999994,
'lng': -118.59893559999999,
'rating': 4.0},
{'Rank': 21,
'Roller Coaster Rides': 'Jet Stream',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4430914,
'lng': -118.611874,
'rating': 0.0},
{'Rank': 23,
'Roller Coaster Rides': 'Road Runner Express',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.007596,
'lng': -118.17908600000001,
'rating': 2.6},
{'Rank': 24,
'Roller Coaster Rides': 'Dive Devil',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4228744,
'lng': -118.5999889,
'rating': 5.0},
{'Rank': 25,
'Roller Coaster Rides': 'Magic Flyer',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.425981799999995,
'lng': -118.5964314,
'rating': 0.0},
{'Rank': 26,
'Roller Coaster Rides': 'Drop of Doom',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.4264164,
'lng': -118.5984501,
'rating': 4.8},
{'Rank': 27,
'Roller Coaster Rides': 'Speedy Gonzales Hot Rod Racers',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.425301899999994,
'lng': -118.5965028,
'rating': 5.0},
{'Rank': 28,
'Roller Coaster Rides': 'Wile E. Coyote Canyon Blaster',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 33.7676718,
'lng': -84.550905,
'rating': 4.3},
{'Rank': 29,
'Roller Coaster Rides': 'Canyon Blaster',
'dataset': 'Six_flags_rides_ratings_updated',
'lat': 34.424904299999994,
'lng': -118.59601640000001,
'rating': 0.0}];
  

  // Loop through the rides array and create one marker for each ride object
  for (var i = 0; i < rides.length; i++) {
      console.log(rides[i]["Roller Coaster Rides"])
      console.log(rides[i].Rank /rides.length)
      console.log(rides[i].lat+";"+ rides[i].lng)
      // Add circles to map
      L.circle([rides[i].lat, rides[i].lng], {
        fillOpacity: 1- ((rides[i].Rank /rides.length)*.8),
        color: "white",
        fillColor:
        //"black",
        "#00ff00",
        // Adjust radius
        radius: rides[i].rating*3
      }).bindPopup("<h3>" + rides[i]["Roller Coaster Rides"] + "</h3> <hr> <h5>Rank: " + rides[i].Rank +";   Rating:"+rides[i].rating +"</h5>")
      .addTo(map)
      .openPopup();
  
  }
  

